(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),i=n(1),u=n(12),s=n(7),l=n.n(s),d=n(15),m={SET_THEME:"SET_THEME"},E={SET_LANGUAGE:"SET_LANGUAGE"},f={SET_ROOM_DATA:"SET_ROOM_DATA",SET_ROOM_USERS:"SET_ROOM_USERS",UPDATE_USER_CURSOR_COORDINATES:"UPDATE_USER_CURSOR_COORDINATES",ADD_USER_TO_ROOM:"ADD_USER_TO_ROOM",REMOVE_USER_FROM_ROOM:"REMOVE_USER_FROM_ROOM"},p={SET_USER:"SET_USER",SET_USER_ID:"SET_USER_ID",SET_USER_ROOM_INFO:"SET_USER_ROOM_INFO",SET_USER_NAME:"SET_USER_NAME"},v={SET_LIVE_EXECUTION:"SET_LIVE_EXECUTION"},O={SET_CODE:"SET_CODE"},b=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t),e.next=3,fetch("".concat(n),{method:"get"});case 3:return a=e.sent,e.abrupt("return",h(a));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(n)});case 2:return a=e.sent,e.abrupt("return",h(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(n=e.sent,200!==t.status){e.next=7;break}return e.abrupt("return",Promise.resolve(n));case 7:return e.abrupt("return",Promise.reject(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=n(11),S=Object(g.a)({basename:"/"}),R=function(e){return function(t){t({type:p.SET_USER_ROOM_INFO,data:e})}},T=n(16),j={position:"top-right",autoClose:2500,hideProgressBar:!1,closeOnClick:!1,pauseOnHover:!1,draggable:!0,progress:void 0},y=function(e){T.b.error(e,j)},N=function(e){T.b.info(e,j)},C=f;var I=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],i=e.dispatch;return r.a.createElement("div",{id:"create-room-wrapper"},r.a.createElement("form",{id:"create-room-form"},r.a.createElement("input",{className:"input-style ",id:"create-room-textfield",type:"text",value:c,placeholder:"Enter name",onChange:function(e){return o(e.target.value)}}),r.a.createElement("button",{className:"blue-btn",onClick:function(e){e.preventDefault(),i(function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/room/create",a={roomName:e},t.prev=2,t.next=5,_("/api/room/create",a);case 5:r=t.sent,S.push("/"+r.roomId),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),y(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()}(c))}},"Create room")))};var M=function(){return r.a.createElement("div",{id:"logo-wrapper"},r.a.createElement("img",{id:"logo-img",alt:"unknown",src:"./CODECOLLAB.png"}))},U=function(e){if(e.length<3)return e;var t=e.split(" ");return t.length<2?t[0][0]:t[0][0]+t[1][0]};var w=function(e){var t=e.user,n=t.name,a={backgroundColor:t.color};return r.a.createElement("li",{className:"topbar-user-list-item"},r.a.createElement("div",{style:a,className:"topbar-user-list-item-avatar"},U(n)))};var D=function(e){var t=e.users;return r.a.createElement("div",{id:"topbar-user-list-wrapper"},r.a.createElement("ul",{id:"topbar-user-list"},t.map((function(e,t){return r.a.createElement(w,{key:t,user:e})}))))};var A=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.user})),n=Object(i.c)((function(e){return e.room.users})),a=t.userRoomInfo;return r.a.createElement("div",{id:"topbar"},r.a.createElement(M,null),!a.validated&&r.a.createElement(I,{dispatch:e}),a.validated&&r.a.createElement(D,{users:n}))},k=n(145),x=n(27);var L=function(e){var t=e.updateCode,n=e.code,c=e.users,o=Object(a.useState)(null),s=Object(u.a)(o,2),l=s[0],d=s[1],m=Object(a.useState)([]),E=Object(u.a)(m,2),f=E[0],p=E[1],v=Object(i.c)((function(e){return e.theme})),O=Object(i.c)((function(e){return e.language}));Object(a.useEffect)((function(){if(l&&_&&c){var e=c.filter((function(e){return e.cursorCoordinates})).map((function(e){var t=e.cursorCoordinates;return{range:new l.Range(t.lineNumber,t.column,t.lineNumber,t.column),options:{className:"user-cursor user-color-".concat(e.color),inlineClassName:"selectedRange"}}})),t=_.current.deltaDecorations(f,e);p(t)}}),[c]),Object(a.useEffect)((function(){x.monaco.init().then((function(e){d(e)})).catch((function(e){return console.error("An error occurred during initialization of Monaco: ",e)}))}),[]);var b=Object(a.useRef)(null),_=Object(a.useRef)(null);return r.a.createElement("div",{id:"editor-wrapper"},r.a.createElement("div",{id:"editor",onKeyUp:function(){var e=_.current.getPosition(),n=b.current();t(n,e)}},r.a.createElement(x.ControlledEditor,{height:"100%",width:"100%",language:O,theme:v,value:n,editorDidMount:function(e,t){b.current=e,_.current=t},options:{minimap:{enabled:!1},smoothScrolling:!0,scrollbar:{verticalScrollbarSize:5,horizontalScrollbarSize:5}}})))};var H=function(e){var t=e.updateCode,n=e.code;return r.a.createElement("div",{id:"content-wrapper"},r.a.createElement("div",{id:"content"},r.a.createElement(L,{canEdit:!0,code:n,updateCode:t})))};var F=function(e){var t=e.user,n=t.name,a={backgroundColor:t.color};return r.a.createElement("div",{className:"sidebar-item"},r.a.createElement("h3",{className:"sidebar-item-text"}," ",n),r.a.createElement("div",{style:a,className:"sidebar-user-list-item-avatar"},U(n)))};var P=function(e){return r.a.createElement("div",{className:"sidebar-title-wrapper"},r.a.createElement("i",{className:"sidebar-icon ".concat(e.icon)}),r.a.createElement("span",{className:"sidebar-title"},e.title))};var V=function(e){var t=e.userId,n=e.users;return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{icon:"fas fa-user-friends",title:"Coders"}),r.a.createElement("div",{id:"user-list"},n.map((function(e,n){return r.a.createElement(F,{key:n,user:e,userId:t})}))))},X=n(28),B=n.n(X);var z=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.theme})),n="dark"===t;return r.a.createElement("div",{className:"settings-item-wrapper"},r.a.createElement(B.a,{value:n,onToggle:function(){e(function(e){return function(t){t({type:m.SET_THEME,data:"dark"===e?"light":"dark"})}}(t))},inactiveLabel:"Light",activeLabel:"Dark"}),r.a.createElement("h3",{className:"toggle-text"}," Theme "))};var G=function(e){var t=e.dispatch,n=Object(i.c)((function(e){return e.liveExecution}));return r.a.createElement("div",{className:"settings-item-wrapper"},r.a.createElement(B.a,{value:n,onToggle:function(){var e;t((e=!n,function(t){t({type:v.SET_LIVE_EXECUTION,data:e})}))}}),r.a.createElement("h3",{className:"toggle-text"}," Live "))},J=function(e){document.getElementById("console").innerHTML="";try{new Function(e)()}catch(t){console.log(t.name+": "+t.message)}};var Y=function(){var e=Object(i.c)((function(e){return e.code}));return r.a.createElement("div",{className:"settings-item-wrapper"},r.a.createElement("button",{className:"blue-btn execute-now-btn",onClick:function(){J(e)}},r.a.createElement("i",{className:"fa fa-play"})," Run"))};var K=function(e){var t=e.dispatch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{icon:"fa fa-cog",title:"Settings"}),r.a.createElement("div",{id:"settings"},r.a.createElement(z,null),r.a.createElement(G,{dispatch:t}),r.a.createElement(Y,null)))};var q=function(){var e=Object(i.c)((function(e){return e.room})),t=Object(i.c)((function(e){return e.user})),n=Object(i.b)(),a=e.users,c=t.id,o=t.userRoomInfo;return r.a.createElement("div",{id:"sidebar"},r.a.createElement(K,{dispatch:n}),o.validated&&r.a.createElement(V,{userId:c,users:a}))},Q=function(e){return function(t){t({type:O.SET_CODE,data:e})}},W=function(){console.log=function(){for(var e=0;e<arguments.length;e++){var t=$(arguments[e]);Z(t)}}};function Z(e){document.getElementById("console").appendChild(e)}function $(e){var t=document.createElement("li");return t.className="log-li","object"===typeof e?Array.isArray(e)?function(e){var t=document.createElement("li");t.className="log-li",t.innerHTML+="[";return e.forEach((function(n,a){t.innerHTML+=ee(n,0),e.length-1!==a&&(t.innerHTML+=", ")})),t.innerHTML+="]",t}(e):function(e){var t=document.createElement("li");t.className="log-li",t.innerHTML+="{ \n";var n=Object.keys(e);return n.forEach((function(a,r){var c=e[a];t.innerHTML+=te(a)+": "+ee(c,0),n.length-1!==r&&(t.innerHTML+=", "),t.innerHTML+="\n"})),t.innerHTML+="}",t}(e):(t.appendChild(function(e){var t=document.createElement("span");return t.className="log-".concat(typeof e),t.innerHTML="string"===typeof e?"'"+e+"'":e,t}(e)),t)}function ee(e,t){return"object"===typeof e?Array.isArray(e)?function(e,t){var n="[";return t++,e.forEach((function(a,r){n+=ee(a,t),e.length-1!==r&&(n+=", ")})),n+="]"}(e):function(e,t){var n="{ \n",a=Object.keys(e);return t++,a.forEach((function(r,c){var o=e[r];n+="  ".repeat(t+1)+te(r)+": "+ee(o,t),a.length-1!==c&&(n+=", "),n+="\n"})),n+="  ".repeat(t)+"}"}(e,t):function(e){var t="log-".concat(typeof e),n="string"===typeof e?'"'+e+'"':e;return'<span class="'.concat(t,'">').concat(n,"</span>")}(e)}function te(e){return"  <span class='log-variable'>".concat(e,"</span>")}var ne=function(e){var t=Object(i.c)((function(e){return e.liveExecution}));return Object(a.useEffect)((function(){t&&J(e.code)}),[e.code,t]),r.a.createElement("div",{id:"console-wrapper"},r.a.createElement("div",{id:"console-title"},r.a.createElement("span",{id:"console-text"}," console ")),r.a.createElement("div",{id:"console-scroll"},r.a.createElement("ul",{id:"console"})))};var ae=function(){var e=Object(i.c)((function(e){return e.code})),t=Object(i.b)();return Object(a.useEffect)(W,[]),r.a.createElement("div",{id:"root-layout"},r.a.createElement(q,null),r.a.createElement(H,{updateCode:function(e){t(Q(e))},code:e}),r.a.createElement(ne,{code:e}))},re=n(62),ce=n.n(re),oe="localhost"===window.location.hostname?"http://localhost:5000":"https://codecollabs.herokuapp.com/",ie=ce()(oe);var ue=function(e){var t=e.dispatch,n=e.code,c=e.updateCode,o=e.user,i=e.roomId,u=e.room;return Object(a.useEffect)((function(){o.name&&i&&(!function(e,t){ie.emit("join_room",{roomId:t,name:e})}(o.name,i),N("You have joined room "+o.userRoomInfo.roomName));e=function(e){!function(e){t(function(e){return function(t){t({type:C.ADD_USER_TO_ROOM,data:e})}}(e))}(e),N(e.name+" joined")},ie.on("user_connected",(function(t){e(t)})),function(e){ie.on("join_room",(function(t){e(t)}))}((function(e){var n;document.log(e),function(e){t(function(e){return function(t){t({type:C.SET_ROOM_DATA,data:e})}}(e))}(e.roomInfo),n=e.userId,t(function(e){return function(t){t({type:p.SET_USER_ID,data:e})}}(n))})),function(e){ie.on("recieve_code",(function(t){e(t)}))}((function(e){var n,a;c(e.code),n=e.userId,a=e.cursorCoordinates,t(function(e,t){return function(n){n({type:C.UPDATE_USER_CURSOR_COORDINATES,data:{userId:e,cursorCoordinates:t}})}}(n,a))})),function(e){ie.on("user_disconnected",(function(t){e(t)}))}((function(e){var n;!function(e){t(function(e){return function(t){t({type:C.REMOVE_USER_FROM_ROOM,data:e})}}(e))}(e),n=e.name+" disconnected",T.b.warning(n,j)}));var e}),[o.name,i]),r.a.createElement("div",{id:"content-wrapper"},r.a.createElement("div",{id:"content"},r.a.createElement(L,{code:n,updateCode:function(e,t){!function(e,t,n,a){var r={roomId:t,info:{code:e,cursorCoordinates:a,userId:n}};ie.emit("typing",r)}(e,u.roomId,o.id,t),c(e)},users:u.users})))};var se=function(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],o=n[1],i=e.handleOk,s=e.show?"modal display-block":"modal display-none";return r.a.createElement("div",{className:s},r.a.createElement("section",{className:"modal-main"},r.a.createElement("div",{id:"modal-content"},r.a.createElement("div",{className:"modal-section",id:"modal-title"},r.a.createElement("h3",{id:"modal-title-h3"}," Your name please")),r.a.createElement("div",{className:"modal-section",id:"modal-input"},r.a.createElement("input",{className:"input-style  modal-input",type:"text",value:c,placeholder:"e.g Joe Doe",onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",{className:"modal-section",id:"modal-btn-wrapper"},r.a.createElement("button",{className:"blue-btn",id:"modal-btn",onClick:function(){c.length>12?y("Your name is too long buddy! :)"):0!==c.length?i(c):y("Please, enter your name! :) ")}},"Let's go!")))))};var le=function(e){var t=e.match.params.room,n=Object(i.b)(),c=Object(i.c)((function(e){return e.user})),o=Object(i.c)((function(e){return e.code})),s=Object(i.c)((function(e){return e.room})),m=Object(a.useState)(!0),E=Object(u.a)(m,2),f=E[0],v=E[1];return Object(a.useEffect)(W,[]),Object(a.useEffect)((function(){n(function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="api/room/validate/".concat(e),t.prev=1,t.next=4,b(a);case 4:r=t.sent,n(R({validated:!0,roomName:r.roomName})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),S.push("/"),y(t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))}),[n,t]),r.a.createElement("div",{id:"root-layout"},r.a.createElement(q,null),c.userRoomInfo.validated&&c.name.length>0&&r.a.createElement(ue,{code:o,updateCode:function(e){n(Q(e))},dispatch:n,roomId:t,user:c,room:s}),r.a.createElement(ne,{code:o}),r.a.createElement(se,{show:f,handleOk:function(e){n(function(e){return function(t){t({type:p.SET_USER_NAME,data:e})}}(e)),v(!1)}}))};document.log=console.log;var de=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement(k.b,{history:S},r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/",component:ae}),r.a.createElement(k.a,{path:"/:room",component:le}))),r.a.createElement(T.a,{position:"top-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1}))},me=(n(136),n(137),n(138),n(139),n(140),n(14)),Ee=n(64),fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"dark",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_THEME:return t.data;default:return e}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return t.data;default:return e}},ve=n(65),Oe=n(3),be={users:[],roomName:""},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.SET_ROOM_DATA:return Object(Oe.a)(Object(Oe.a)({},e),t.data);case f.SET_ROOM_USERS:return Object(Oe.a)(Object(Oe.a)({},e),{},{users:t.data});case f.ADD_USER_TO_ROOM:return Object(Oe.a)(Object(Oe.a)({},e),{},{users:[].concat(Object(ve.a)(e.users),[t.data])});case f.REMOVE_USER_FROM_ROOM:return Object(Oe.a)(Object(Oe.a)({},e),{},{users:e.users.filter((function(e){return e.socketId!==t.data.socketId}))});case f.UPDATE_USER_CURSOR_COORDINATES:return Object(Oe.a)(Object(Oe.a)({},e),{},{users:e.users.map((function(e){return e._id===t.data.userId?Object(Oe.a)(Object(Oe.a)({},e),{},{cursorCoordinates:t.data.cursorCoordinates}):e}))});default:return e}},he=p,ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"",name:"",userRoomInfo:{validated:!1,roomName:""}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he.SET_USER:return t.data;case he.SET_USER_ID:return Object(Oe.a)(Object(Oe.a)({},e),{},{id:t.data});case he.SET_USER_ROOM_INFO:return Object(Oe.a)(Object(Oe.a)({},e),{},{userRoomInfo:t.data});case he.SET_USER_NAME:return Object(Oe.a)(Object(Oe.a)({},e),{},{name:t.data});default:return e}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.SET_LIVE_EXECUTION:return t.data;default:return e}},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"//type your code here",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.SET_CODE:return t.data;default:return e}},Te=Object(me.c)({theme:fe,language:pe,room:_e,user:ge,liveExecution:Se,code:Re}),je=[Ee.a],ye=Object(me.d)(me.a.apply(void 0,je),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}),Ne=Object(me.e)(Te,ye);o.a.render(r.a.createElement(i.a,{store:Ne},r.a.createElement(de,null)),document.getElementById("root"))},66:function(e,t,n){e.exports=n(141)}},[[66,1,2]]]);
//# sourceMappingURL=main.8ad034d1.chunk.js.map